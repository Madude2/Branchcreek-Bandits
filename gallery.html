<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Galleri - Brachcreek Bandits</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/feather-icons"></script>
<link href="https://fonts.cdnfonts.com/css/western" rel="stylesheet">

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

const firebaseConfig = {
  apiKey:"YOUR_API_KEY",
  authDomain:"YOUR_PROJECT_ID.firebaseapp.com",
  projectId:"YOUR_PROJECT_ID",
  storageBucket:"YOUR_PROJECT_ID.appspot.com",
  messagingSenderId:"YOUR_SENDER_ID",
  appId:"YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

function updateMenu(name) {
  const loginMenu = document.getElementById("login-btn");
  const mobileLoginBtn = document.getElementById("mobile-login-btn");
  loginMenu.innerHTML = `${name} <button onclick="logout()" class="ml-2 text-red-500 font-bold">Log ud</button>`;
  mobileLoginBtn.innerHTML = `${name} <button onclick="logout()" class="ml-2 text-red-500 font-bold">Log ud</button>`;
}

// Restore test account login
window.addEventListener('DOMContentLoaded', () => {
  const testUser = localStorage.getItem('testUser');
  if(testUser) updateMenu(testUser);
});

// Login functions
window.login = function() {
  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  if(email === "veenkate0@gmail.com" && password === "tzw85unb") {
    alert("Logget ind som Kate Veen!");
    localStorage.setItem('testUser', "Kate Veen");
    updateMenu("Kate Veen");
    document.getElementById("login-dropdown").classList.add("hidden");
    return;
  }

  signInWithEmailAndPassword(auth, email, password)
    .then(userCredential => {
      alert("Logget ind!");
      updateMenu(userCredential.user.displayName || userCredential.user.email);
      document.getElementById("login-dropdown").classList.add("hidden");
    })
    .catch(err => alert(err.message));
}

window.mobileLogin = function() {
  const email = document.getElementById("mobile-login-email").value;
  const password = document.getElementById("mobile-login-password").value;

  if(email === "veenkate0@gmail.com" && password === "tzw85unb") {
    alert("Logget ind som Kate Veen!");
    localStorage.setItem('testUser', "Kate Veen");
    updateMenu("Kate Veen");
    document.getElementById("mobile-login-form").classList.add("hidden");
    return;
  }

  signInWithEmailAndPassword(auth, email, password)
    .then(userCredential => {
      alert("Logget ind!");
      updateMenu(userCredential.user.displayName || userCredential.user.email);
      document.getElementById("mobile-login-form").classList.add("hidden");
    })
    .catch(err => alert(err.message));
}

// Firebase persistent login
onAuthStateChanged(auth, user => {
  if(user) updateMenu(user.displayName || user.email);
});

window.logout = function() {
  localStorage.removeItem('testUser');
  signOut(auth).then(()=> location.reload()).catch(err=>alert(err.message));
}
</script>

<style>
.nav-link { color: white; }
.nav-link:hover { color: #d4a017; }
.western-text { font-family: 'Western', sans-serif; }
.cursor-pointer { cursor: pointer; }

/* Gallery Grid */
.gallery-grid img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  border-radius: 0.5rem;
  cursor: pointer;
}

/* Modal */
#modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  justify-content: center;
  align-items: center;
  z-index: 50;
}

#modal-img {
  max-height: 90%;
  max-width: 90%;
  border-radius: 0.5rem;
  transform: scale(0.9);
  transition: transform 0.3s ease;
}

#modal.show #modal-img { transform: scale(1); }

/* Overlay controls */
.modal-control {
  position: absolute;
  color: white;
  font-size: 2.5rem;
  cursor: pointer;
  user-select: none;
  z-index: 100;
}
#close-btn { top: 1rem; right: 2rem; }
#prev-btn { left: 1rem; top: 50%; transform: translateY(-50%); }
#next-btn { right: 1rem; top: 50%; transform: translateY(-50%); }
</style>
</head>
<body class="bg-gray-100 font-sans">

<!-- Navigation -->
<nav class="bg-black text-white shadow-lg">
<div class="container mx-auto px-8 py-8 flex justify-between items-center">
  <a href="index.html" class="flex items-center space-x-4">
    <img src="https://scontent-cph2-1.xx.fbcdn.net/v/t39.30808-6/486356878_9742857432426186_6599031023968483380_n.jpg?_nc_cat=101&ccb=1-7&_nc_sid=2285d6&_nc_ohc=pLOCdCS-5B8Q7kNvwFTER7R&_nc_oc=AdnR99wp-pEKaV-6THZCiEU6b8Ny9BSt3ipXXV-YQvmiTjQn5NavYPNTrtQthElCT-I&_nc_zt=23&_nc_ht=scontent-cph2-1.xx&_nc_gid=JOcxiVtD0Utv27QeP2o4BQ&oh=00_AfbkRbXivYhEtim7EZ9ChOIeasZx-i5jNdi-RDn3FaUTMA&oe=68D33031" alt="Logo" class="h-20 w-20 md:h-40 md:w-40 rounded-full">
    <span class="western-text text-3xl md:text-5xl">Branchcreek Bandits</span>
  </a>

  <div class="hidden md:flex items-center space-x-8">
    <a href="about.html" class="nav-link font-medium">Information</a>
    <a href="events.html" class="nav-link font-medium">Begivenheder</a>
    <a href="gallery.html" class="nav-link font-medium">Galleri</a>
    <a href="forum.html" class="nav-link font-medium">Forum</a>
    <a href="contact.html" class="nav-link font-medium">Kontakt</a>

    <!-- Login Dropdown -->
    <div class="relative">
      <button id="login-btn" class="nav-link font-medium flex items-center space-x-1">
        <span>Login</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
        </svg>
      </button>
      <div id="login-dropdown" class="absolute right-0 mt-2 w-64 bg-white text-black shadow-lg p-4 hidden z-50">
        <h3 class="font-bold mb-2">Login</h3>
        <input type="email" id="login-email" placeholder="Email" class="w-full mb-2 px-3 py-2 border">
        <input type="password" id="login-password" placeholder="Password" class="w-full mb-2 px-3 py-2 border">
        <button onclick="login()" class="w-full bg-yellow-600 hover:bg-yellow-700 py-2 font-bold mb-2">Login</button>
        <a href="signup.html" class="text-blue-600 hover:underline block text-center">Opret Konto</a>
      </div>
    </div>
  </div>

  <button id="menu-btn" class="md:hidden focus:outline-none"><i data-feather="menu"></i></button>
</div>

<div id="mobile-menu" class="hidden md:hidden bg-black text-white px-8 pb-6">
  <a href="about.html" class="block py-2 nav-link">Information</a>
  <a href="events.html" class="block py-2 nav-link">Begivenheder</a>
  <a href="gallery.html" class="block py-2 nav-link">Galleri</a>
  <a href="forum.html" class="block py-2 nav-link">Forum</a>
  <a href="contact.html" class="block py-2 nav-link">Kontakt</a>
  <a href="#" id="mobile-login-btn" class="block py-2 nav-link">Login</a>
  <div id="mobile-login-form" class="hidden mt-2">
    <h3 class="font-bold mb-2">Login</h3>
    <input type="email" id="mobile-login-email" placeholder="Email" class="w-full mb-2 px-3 py-2 border">
    <input type="password" id="mobile-login-password" placeholder="Password" class="w-full mb-2 px-3 py-2 border">
    <button onclick="mobileLogin()" class="w-full bg-yellow-600 hover:bg-yellow-700 py-2 font-bold mb-2">Login</button>
    <a href="signup.html" class="text-blue-600 hover:underline block text-center">Opret Konto</a>
  </div>
</div>
</nav>

<!-- Gallery Section -->
<section class="py-16 bg-white">
<div class="container mx-auto px-6 max-w-5xl">
<h1 class="western-text text-5xl mb-6 text-center">Galleri</h1>
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 gallery-grid" id="gallery"></div>
</div>

<!-- Modal -->
<div id="modal" class="flex">
  <img id="modal-img" src="">
  <span id="close-btn" class="modal-control" onclick="closeModal()">&times;</span>
  <span id="prev-btn" class="modal-control" onclick="prevImage()">&#10094;</span>
  <span id="next-btn" class="modal-control" onclick="nextImage()">&#10095;</span>
</div>

<script>
feather.replace();
const menuBtn=document.getElementById('menu-btn');
const mobileMenu=document.getElementById('mobile-menu');
menuBtn.addEventListener('click',()=>mobileMenu.classList.toggle('hidden'));

// Desktop login dropdown
const loginBtn = document.getElementById('login-btn');
const loginDropdown = document.getElementById('login-dropdown');
loginBtn.addEventListener('click', () => loginDropdown.classList.toggle('hidden'));

// Mobile login dropdown
const mobileLoginBtn = document.getElementById('mobile-login-btn');
const mobileLoginForm = document.getElementById('mobile-login-form');
mobileLoginBtn.addEventListener('click', () => mobileLoginForm.classList.toggle('hidden'));

// Gallery Images
const images = [
  "gallari/BB1.jpg",
  "gallari/BB2.jpg",
  "gallari/BB3.jpg"
];

let currentIndex = 0;
const gallery = document.getElementById('gallery');
images.forEach((src, index) => {
  const img = document.createElement('img');
  img.src = src;
  img.onclick = () => openModal(index);
  gallery.appendChild(img);
});

function openModal(index){
  currentIndex = index;
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modal-img');
  modalImg.src = images[currentIndex];
  modal.style.display = 'flex';
  setTimeout(()=>modalImg.style.transform = 'scale(1)', 10);
}

function closeModal(){
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modal-img');
  modalImg.style.transform = 'scale(0.9)';
  setTimeout(()=> modal.style.display='none', 300);
}

function nextImage(){
  currentIndex = (currentIndex + 1) % images.length;
  document.getElementById('modal-img').src = images[currentIndex];
}

function prevImage(){
  currentIndex = (currentIndex - 1 + images.length) % images.length;
  document.getElementById('modal-img').src = images[currentIndex];
}
</script>

</body>
</html>
