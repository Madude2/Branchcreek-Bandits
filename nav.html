<nav class="bg-black text-white shadow-lg relative z-50">
  <style>
    /* 🔔 Only show one notification badge depending on screen size */
    #notif-count-mobile {
      display: none; /* hidden by default */
    }

    @media (max-width: 767px) {
      #notif-count {
        display: none !important; /* hide desktop badge on mobile */
      }
      #notif-count-mobile {
        display: inline-block !important; /* show mobile badge */
      }
    }
  </style>

  <div class="container mx-auto px-8 py-6 flex justify-between items-center">
    <!-- Logo + Site Name -->
    <a href="index.html" class="flex items-center space-x-4">
      <img src="assets/logo/LOGO.jpg" alt="Logo" class="h-20 w-20 md:h-40 md:w-40 rounded-full">
      <span class="western-text text-3xl md:text-5xl">Branchcreek Bandits</span>
    </a>

    <!-- Desktop Links -->
    <div class="hidden md:flex items-center space-x-8">
      <!-- Information Dropdown -->
      <div class="relative group">
        <a href="about.html" class="nav-link font-medium flex items-center gap-1">
          Information
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </a>
        <ul class="absolute left-0 mt-2 w-48 bg-white text-black rounded shadow-lg opacity-0 invisible 
                   group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
          <li><a href="westernarssenal.html" class="block px-4 py-2 hover:bg-gray-200">Western Arsenalet</a></li>
          <li><a href="rules.html" class="block px-4 py-2 hover:bg-gray-200">Regler og Sikkerhed</a></li>
        </ul>
      </div>

      <a href="events.html" class="nav-link font-medium">Begivenheder</a>
      <a href="gallery.html" class="nav-link font-medium">Galleri</a>
      <a href="forum.html" class="nav-link font-medium">Forum</a>
      <a href="contact.html" class="nav-link font-medium">Kontakt</a>

      <!-- 🔔 Notification Bell (Desktop) -->
      <div class="relative flex items-center">
        <button id="notif-btn" class="nav-link font-medium flex items-center gap-1 cursor-pointer relative z-50">
          <i data-feather="bell"></i>
          <span id="notif-count"
            class="absolute -top-2.5 -right-2 bg-red-600 text-white text-xs font-bold px-0 rounded-full hidden">
            0
          </span>
        </button>

        <!-- Dropdown (moved to body at runtime) -->
        <div id="notif-dropdown"
          class="absolute mt-1 w-80 bg-white text-black shadow-lg p-4 hidden rounded-lg border border-gray-300 z-[9999]"
          style="top: 100%; right: 0;">
          <h3 class="font-bold mb-2 text-gray-800">Notifikationer</h3>
          <div id="notif-messages" class="max-h-64 overflow-y-auto text-sm">
            <p class="text-gray-500 text-center">Indlæser notifikationer...</p>
          </div>
          <div class="border-t border-gray-300 mt-3 pt-2 text-center">
            <a href="notifications.html" class="text-yellow-600 hover:text-yellow-700 font-bold">
              Se alle notifikationer
            </a>
          </div>
        </div>
      </div>

      <!-- Login Dropdown -->
      <div class="relative flex items-center">
        <button id="login-btn" class="nav-link font-medium flex items-center gap-1 cursor-pointer relative z-50">
          Login
          <svg class="w-4 h-4 inline-block ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>

        <!-- Dropdown -->
        <div id="login-dropdown"
          class="absolute mt-1 w-64 bg-white text-black shadow-lg p-4 hidden rounded-lg border border-gray-200"
          style="top: 100%; right: 0;">
          <h3 class="font-bold mb-2">Login</h3>
          <input type="email" id="login-email" placeholder="Email"
            class="w-full mb-2 px-3 py-2 border rounded">

          <!-- 👁️ Password field with eye toggle -->
          <div class="relative mb-2">
            <input
              id="login-password"
              type="password"
              placeholder="Adgangskode"
              class="w-full px-3 py-2 border rounded pr-10"
            />
            <button
              type="button"
              id="toggle-login-password"
              class="absolute inset-y-0 right-2 flex items-center text-gray-500 hover:text-yellow-600"
              aria-label="Vis/Skjul adgangskode"
            >
              <i data-feather="eye"></i>
            </button>
          </div>

          <!-- ✅ Spinner-ready button -->
          <button id="login-submit" onclick="login()"
            class="w-full bg-yellow-600 hover:bg-yellow-700 text-black font-bold py-2 rounded mb-2 transition-all duration-200">
            Log ind
          </button>
          <a href="signup.html" class="text-blue-600 hover:underline block text-center">Opret Konto</a>
        </div>
      </div>
    </div>

    <!-- Mobile Hamburger -->
    <button id="menu-btn" class="md:hidden focus:outline-none">
      <i data-feather="menu"></i>
    </button>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden md:hidden bg-black text-white px-8 pb-6">
    <div class="mb-2">
      <button class="flex justify-between w-full nav-link"
        onclick="this.nextElementSibling.classList.toggle('hidden')">
        Information
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
      </button>
      <ul class="hidden flex flex-col pl-4 mt-2 gap-1">
        <li><a href="westernarssenal.html" class="block py-1 nav-link">Western Arsenalet</a></li>
        <li><a href="rules.html" class="block py-1 nav-link">Regler og Sikkerhed</a></li>
      </ul>
    </div>

    <a href="events.html" class="block py-2 nav-link">Begivenheder</a>
    <a href="gallery.html" class="block py-2 nav-link">Galleri</a>
    <a href="forum.html" class="block py-2 nav-link">Forum</a>
    <a href="contact.html" class="block py-2 nav-link">Kontakt</a>

    <!-- 🔔 Mobile Notifications (Separate Badge) -->
    <a href="notifications.html" class="block py-2 nav-link flex items-center gap-1 relative">
      <i data-feather="bell"></i>
      <span id="notif-count-mobile"
        class="absolute -top-1 -right-3 bg-red-600 text-white text-xs font-bold px-1.5 rounded-full hidden">
        0
      </span>
      Notifikationer
    </a>

    <!-- Mobile Login -->
    <div id="mobile-login-form" class="mt-4">
      <button id="mobile-login-btn"
        class="nav-link font-medium w-full text-left mb-2 cursor-pointer">
        Login
      </button>
      <div class="hidden mt-2">
        <input type="email" id="mobile-login-email" placeholder="Email"
          class="w-full mb-2 px-3 py-2 border rounded">

        <!-- 👁️ Mobile password field with toggle -->
<div class="relative mb-2">
  <input
    id="mobile-login-password"
    type="password"
    placeholder="Adgangskode"
    class="w-full px-3 py-2 border rounded pr-10"
  />
  <button
    type="button"
    id="toggle-mobile-password"
    class="absolute inset-y-0 right-2 flex items-center text-gray-500 hover:text-yellow-600"
    aria-label="Hold for at se adgangskode"
  >
    <i data-feather="eye"></i>
  </button>
</div>


        <!-- ✅ Spinner-ready button -->
        <button id="mobile-login-submit" onclick="mobileLogin()"
          class="w-full bg-yellow-600 hover:bg-yellow-700 text-black font-bold py-2 mb-2 rounded transition-all duration-200">
          Log ind
        </button>
        <a href="signup.html" class="text-blue-600 hover:underline block text-center">Opret Konto</a>
      </div>
    </div>
  </div>
</nav>

<!-- Ensure Feather icons & toggle setup after load -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    if (window.feather) feather.replace();

    // Refresh notifications after injection
    if (typeof window.refreshNotificationsBadge === "function") {
      setTimeout(() => window.refreshNotificationsBadge(), 800);
    }

    // Initialize password toggle setup if available
    if (typeof window.setupAuth === "function") {
      setTimeout(() => {
        try { window.setupAuth(); } catch (e) { console.warn("setupAuth not ready:", e); }
      }, 1000);
    }
  });
</script>
