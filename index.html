<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Branchcreek Bandits</title>

<!-- Tailwind + Fonts + Icons -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.cdnfonts.com/css/western" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

<style>
.nav-link { color: white; }
.nav-link:hover { color: #d4a017; }
h1,h2,h3,h4,h5,h6 { font-family: 'Western', sans-serif; }
.western-text { font-family: 'Western', sans-serif; }
.btn-gold { background-color: #d4a017; transition: all 0.3s ease; }
.btn-gold:hover { background-color: #b78a14; transform: translateY(-2px); }
.forum-post:hover { box-shadow: 0 4px 6px rgba(0,0,0,0.1); transform: translateY(-2px); }
.slide { position: absolute; inset: 0; transition: opacity 1s ease-in-out; }
input, button { border-radius: 0 !important; }
</style>
</head>
<body class="bg-gray-100 font-sans">

<!-- Dynamic Navbar -->
<div id="navbar"></div>

<!-- Slideshow Section -->
<section class="relative w-full overflow-hidden">
  <div class="relative h-96 md:h-[500px]">
    <div class="absolute inset-0 transition-opacity duration-1000 opacity-100 slide">
      <img src="gallari/BB1.jpg" class="w-full h-full object-cover" alt="Slide 1">
    </div>
    <div class="absolute inset-0 transition-opacity duration-1000 opacity-0 slide">
      <img src="gallari/BB2.jpg" class="w-full h-full object-cover" alt="Slide 2">
    </div>
    <div class="absolute inset-0 transition-opacity duration-1000 opacity-0 slide">
      <img src="gallari/BB3.jpg" class="w-full h-full object-cover" alt="Slide 3">
    </div>
  </div>
</section>

<!-- Welcome Section -->
<section class="bg-gray-800 text-white py-16">
  <div class="container mx-auto px-6 text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-6 western-text">Velkommen til Branchcreek Bandits!</h1>
    <p class="text-xl mb-8">Denne hjemmeside er stadig under konstruktion</p>
    <a href="about.html" class="btn-gold text-black font-bold px-6 py-3">Læs mere</a>
  </div>
</section>

<!-- Latest News / Forum Teaser -->
<section class="py-12">
  <div class="container mx-auto px-6">
    <h2 class="text-3xl font-bold mb-6 western-text">Seneste Nyt</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white p-6 forum-post">
        <h3 class="text-xl font-bold mb-2">Nyt Skydestævne</h3>
        <p class="text-gray-700">Vi afholder et stort cowboy action shooting event næste måned. Kom og vær med!</p>
        <a href="events.html" class="text-blue-600 hover:underline">Læs mere →</a>
      </div>
      <div class="bg-white p-6 forum-post">
        <h3 class="text-xl font-bold mb-2">Galleri opdateret</h3>
        <p class="text-gray-700">Se de nyeste billeder fra vores sidste event i galleriet.</p>
        <a href="gallery.html" class="text-blue-600 hover:underline">Se billeder →</a>
      </div>
      <div class="bg-white p-6 forum-post">
        <h3 class="text-xl font-bold mb-2">Forum åbent</h3>
        <p class="text-gray-700">Deltag i diskussionerne og del dine oplevelser i vores nye forum.</p>
        <a href="forum.html" class="text-blue-600 hover:underline">Gå til forum →</a>
      </div>
    </div>
  </div>
</section>

<!-- Dynamic Footer -->
<div id="footer"></div>

<!-- Firebase Auth -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCzk3xKdC0p9logWjGIZX41M1oeIeqjxGI",
  authDomain: "branchcreek-bandits.firebaseapp.com",
  projectId: "branchcreek-bandits",
  storageBucket: "branchcreek-bandits.firebasestorage.app",
  messagingSenderId: "828305260971",
  appId: "1:828305260971:web:6c3601fc97601a9621d2ee",
  measurementId: "G-550TRD5SQ3"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

window.setupAuth = function() {
  function updateMenu(name) {
    const loginBtn = document.getElementById("login-btn");
    const mobileLoginBtn = document.getElementById("mobile-login-btn");
    if(loginBtn) loginBtn.innerHTML = `${name} <button onclick="logout()" class="ml-2 text-red-500 font-bold">Log ud</button>`;
    if(mobileLoginBtn) mobileLoginBtn.innerHTML = `${name} <button onclick="logout()" class="ml-2 text-red-500 font-bold">Log ud</button>`;
  }

  // Desktop login
  window.login = function() {
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;

    signInWithEmailAndPassword(auth,email,password)
      .then(userCredential => {
        const name = userCredential.user.displayName || userCredential.user.email;
        updateMenu(name);
        document.getElementById("login-dropdown").classList.add("hidden");
      })
      .catch(err => alert(err.message));
  }

  // Mobile login
  window.mobileLogin = function() {
    const email = document.getElementById("mobile-login-email").value;
    const password = document.getElementById("mobile-login-password").value;

    signInWithEmailAndPassword(auth,email,password)
      .then(userCredential => {
        const name = userCredential.user.displayName || userCredential.user.email;
        updateMenu(name);
        document.getElementById("mobile-login-form").classList.add("hidden");
      })
      .catch(err => alert(err.message));
  }

  // Persistent login
  onAuthStateChanged(auth,user=>{
    if(user) {
      const name = user.displayName || user.email;
      updateMenu(name);
    }
  });

  // Logout
  window.logout = function() {
    signOut(auth).then(()=> location.reload()).catch(err=>alert(err.message));
  }
}
</script>

<script>
// Load navbar and footer dynamically
function includeHTML(file, elementId, callback){
  fetch(file).then(res=>res.text()).then(data=>{
    document.getElementById(elementId).innerHTML = data;
    if(callback) callback();
    feather.replace();
  }).catch(err=>console.error(err));
}

// Navbar
includeHTML("nav.html","navbar",()=>{
  const menuBtn=document.getElementById('menu-btn');
  const mobileMenu=document.getElementById('mobile-menu');
  if(menuBtn) menuBtn.addEventListener('click',()=>mobileMenu.classList.toggle('hidden'));

  const loginBtn=document.getElementById('login-btn');
  const loginDropdown=document.getElementById('login-dropdown');
  if(loginBtn) loginBtn.addEventListener('click',()=>loginDropdown.classList.toggle('hidden'));

  const mobileLoginBtn=document.getElementById('mobile-login-btn');
  const mobileLoginForm=document.getElementById('mobile-login-form');
  if(mobileLoginBtn) mobileLoginBtn.addEventListener('click',()=>mobileLoginForm.classList.toggle('hidden'));

  setupAuth(); // ✅ Setup Firebase auth AFTER navbar exists
});

// Footer
includeHTML("footer.html","footer");

// Slideshow
const slides=document.querySelectorAll('.slide');
let currentIndex=0;
function showSlide(index){slides.forEach((slide,i)=>slide.style.opacity=i===index?'1':'0');}
function nextSlide(){currentIndex=(currentIndex+1)%slides.length;showSlide(currentIndex);}
showSlide(currentIndex);
setInterval(nextSlide,5000);
</script>

</body>
</html>
